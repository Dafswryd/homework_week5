<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrasi</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="stylelist.css">
</head>
<body>
    <div>
      <div>
        <ul class="nav nav-tabs justify-content-center" id="myTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <a class="nav-link active" id="tab1-tab" data-bs-toggle="tab" href="#tab1" role="tab" aria-controls="tab1" aria-selected="true">REGISTRASI</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" id="tab2-tab" data-bs-toggle="tab" href="#tab2" role="tab" aria-controls="tab2" aria-selected="false">LIST DATA</a>
          </li>
        </ul>
      </div>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade text-center mt-5" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
            <h2>REGISTRASI</h2>
            <div>
              <div class="mt-5 border border-2 displayBody">
                <div class="input-group flex-nowrap p-3">
                    <input type="text" class="form-control" id="name" placeholder="Nama" aria-label="Nama" aria-describedby="addon-wrapping">
                  </div>
                  <div class="input-group flex-nowrap p-3">
                    <input type="text" class="form-control" id="age" placeholder="Umur" aria-label="Umur" aria-describedby="addon-wrapping">
                  </div>
        
                  <div class="input-group flex-nowrap p-3">
                    <input type="text" class="form-control" id="income" placeholder="Pendapatan" aria-label="Pendapatan" aria-describedby="addon-wrapping">
                  </div>
    
                  <div class="d-grid gap-2 p-3">
                    <button class="btn btnSubmit" id="register" type="button">Register</button>
                  </div>
              </div>
            </div>
          </div>

          <div class="tab-pane fade text-center mt-5 mb-5" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
            <h2>LIST DATA</h2>
            <div>
              <div>
                <table id="dataTable" class="table">
                  <thead>
                    <tr>
                      <th scope="col">No</th>
                      <th scope="col">Nama</th>
                      <th scope="col">Umur</th>
                      <th scope="col">Pendapatan</th>
                    </tr>
                  </thead>
                  <tbody id="dataList">
                  </tbody>
                </table>
                <div>
                    <p id="averageAge"></p>
                    <p id="averageIncome"></p>
                </div>
              </div>
            </div>
          </div>
        </div>        
    </div>
    
    <script>     
        let data = [];
        let numbers = 1;
        const clickRegister = document.getElementById("register");
  
        clickRegister.onclick = function () {
  
            const inputName = document.getElementById("name").value;
            const inputAge = parseInt(document.getElementById("age").value); // Konversi ke tipe data number
            const inputIncome = parseInt(document.getElementById("income").value); // Konversi ke tipe data number
  
            if (inputName.length < 10 || inputAge < 25 || inputIncome < 100000 || inputIncome > 1000000) {
  
                alert("Nama harus memiliki minimal 10 karakter atau Umur < 25 atau Pendapatan < 100000 atau Pendapatan > 1000000");
  
            } else {
  
                let table = document.getElementById('dataTable');
                let row = table.insertRow(-1);
  
                let cellNo = row.insertCell(0);
                cellNo.innerHTML = numbers++;
  
                let cellNama = row.insertCell(1);
                cellNama.innerHTML = inputName;
  
                let cellUmur = row.insertCell(2);
                cellUmur.innerHTML = inputAge;
  
                let cellPendapatan = row.insertCell(3);
                cellPendapatan.innerHTML = inputIncome;
  
                document.getElementById('name').value = '';
                document.getElementById('age').value = '';
                document.getElementById('income').value = '';
  
                data.push({
                    Nama: inputName,
                    Umur: inputAge,
                    Pendapatan: inputIncome
                });
                console.log(data);
  
                let totalAge = 0;
                let totalIncome = 0;
  
                // Loop melalui array objek dan menjumlahkan umur
                for (let i = 0; i < data.length; i++) {
                    totalAge += data[i].Umur;
                    totalIncome += data[i].Pendapatan;
                }
  
                // Hitung rata-rata umur dengan membagi total umur dengan jumlah objek dalam array
                const averageAge = totalAge / data.length;
                console.log("Rata-rata Umur:", averageAge);
                
                const averageAgeDisplay = document.getElementById("averageAge")
                averageAgeDisplay.innerHTML = "Nilai Rata - rata umur " + averageAge
  
                const averageIncome = totalIncome / data.length;
                console.log("Rata-rata Pendapatan:", averageIncome);
  
                const averageIncomeDisplay = document.getElementById("averageIncome")
                averageIncomeDisplay.innerHTML = "Nilai Rata - rata umur " + averageIncome
                
                
            }
        }
      </script>
      
</body>
</html>